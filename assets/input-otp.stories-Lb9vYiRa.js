import{j as o}from"./jsx-runtime-Cf8x2fCZ.js";import{r as e}from"./index-B6o7_jwP.js";import{c as Y}from"./utils-KnJS0CU8.js";import{I as $e}from"./icon-CVdS88hk.js";import"./index-yBjzXJbu.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./iframe-ME0ytDCZ.js";var ze=Object.defineProperty,Ze=Object.defineProperties,Qe=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,be=(t,r,l)=>r in t?ze(t,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[r]=l,Ue=(t,r)=>{for(var l in r||(r={}))ke.call(r,l)&&be(t,l,r[l]);if(ee)for(var l of ee(r))Me.call(r,l)&&be(t,l,r[l]);return t},Je=(t,r)=>Ze(t,Qe(r)),Ke=(t,r)=>{var l={};for(var s in t)ke.call(t,s)&&r.indexOf(s)<0&&(l[s]=t[s]);if(t!=null&&ee)for(var s of ee(t))r.indexOf(s)<0&&Me.call(t,s)&&(l[s]=t[s]);return l};function Xe(t){let r=setTimeout(t,0),l=setTimeout(t,10),s=setTimeout(t,50);return[r,l,s]}function Ye(t){let r=e.useRef();return e.useEffect(()=>{r.current=t}),r.current}var et=18,Re=40,tt=`${Re}px`,nt=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function rt({containerRef:t,inputRef:r,pushPasswordManagerStrategy:l,isFocused:s}){let[w,d]=e.useState(!1),[I,P]=e.useState(!1),[A,V]=e.useState(!1),q=e.useMemo(()=>l==="none"?!1:(l==="increase-width"||l==="experimental-no-flickering")&&w&&I,[w,I,l]),N=e.useCallback(()=>{let h=t.current,C=r.current;if(!h||!C||A||l==="none")return;let b=h,T=b.getBoundingClientRect().left+b.offsetWidth,W=b.getBoundingClientRect().top+b.offsetHeight/2,u=T-et,L=W;document.querySelectorAll(nt).length===0&&document.elementFromPoint(u,L)===h||(d(!0),V(!0))},[t,r,A,l]);return e.useEffect(()=>{let h=t.current;if(!h||l==="none")return;function C(){let T=window.innerWidth-h.getBoundingClientRect().right;P(T>=Re)}C();let b=setInterval(C,1e3);return()=>{clearInterval(b)}},[t,l]),e.useEffect(()=>{let h=s||document.activeElement===r.current;if(l==="none"||!h)return;let C=setTimeout(N,0),b=setTimeout(N,2e3),T=setTimeout(N,5e3),W=setTimeout(()=>{V(!0)},6e3);return()=>{clearTimeout(C),clearTimeout(b),clearTimeout(T),clearTimeout(W)}},[r,s,l,N]),{hasPWMBadge:w,willPushPWMBadge:q,PWM_BADGE_SPACE_WIDTH:tt}}var _e=e.createContext({}),De=e.forwardRef((t,r)=>{var l=t,{value:s,onChange:w,maxLength:d,textAlign:I="left",pattern:P,placeholder:A,inputMode:V="numeric",onComplete:q,pushPasswordManagerStrategy:N="increase-width",pasteTransformer:h,containerClassName:C,noScriptCSSFallback:b=at,render:T,children:W}=l,u=Ke(l,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),L,ie,se,ue,ce;let[Ne,We]=e.useState(typeof u.defaultValue=="string"?u.defaultValue:""),c=s??Ne,k=Ye(c),H=e.useCallback(n=>{w==null||w(n),We(n)},[w]),S=e.useMemo(()=>P?typeof P=="string"?new RegExp(P):P:null,[P]),p=e.useRef(null),ne=e.useRef(null),re=e.useRef({value:c,onChange:H,isIOS:typeof window<"u"&&((ie=(L=window==null?void 0:window.CSS)==null?void 0:L.supports)==null?void 0:ie.call(L,"-webkit-touch-callout","none"))}),K=e.useRef({prev:[(se=p.current)==null?void 0:se.selectionStart,(ue=p.current)==null?void 0:ue.selectionEnd,(ce=p.current)==null?void 0:ce.selectionDirection]});e.useImperativeHandle(r,()=>p.current,[]),e.useEffect(()=>{let n=p.current,a=ne.current;if(!n||!a)return;re.current.value!==n.value&&re.current.onChange(n.value),K.current.prev=[n.selectionStart,n.selectionEnd,n.selectionDirection];function m(){if(document.activeElement!==n){z(null),Z(null);return}let i=n.selectionStart,f=n.selectionEnd,X=n.selectionDirection,y=n.maxLength,R=n.value,E=K.current.prev,j=-1,O=-1,_;if(R.length!==0&&i!==null&&f!==null){let qe=i===f,Le=i===R.length&&R.length<y;if(qe&&!Le){let D=i;if(D===0)j=0,O=1,_="forward";else if(D===y)j=D-1,O=D,_="backward";else if(y>1&&R.length>1){let oe=0;if(E[0]!==null&&E[1]!==null){_=D<E[1]?"backward":"forward";let He=E[0]===E[1]&&E[0]<y;_==="backward"&&!He&&(oe=-1)}j=oe+D,O=oe+D+1}}j!==-1&&O!==-1&&j!==O&&p.current.setSelectionRange(j,O,_)}let ve=j!==-1?j:i,xe=O!==-1?O:f,Ve=_??X;z(ve),Z(xe),K.current.prev=[ve,xe,Ve]}if(document.addEventListener("selectionchange",m,{capture:!0}),m(),document.activeElement===n&&ae(!0),!document.getElementById("input-otp-style")){let i=document.createElement("style");if(i.id="input-otp-style",document.head.appendChild(i),i.sheet){let f="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Q(i.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Q(i.sheet,`[data-input-otp]:autofill { ${f} }`),Q(i.sheet,`[data-input-otp]:-webkit-autofill { ${f} }`),Q(i.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Q(i.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let v=()=>{a&&a.style.setProperty("--root-height",`${n.clientHeight}px`)};v();let x=new ResizeObserver(v);return x.observe(n),()=>{document.removeEventListener("selectionchange",m,{capture:!0}),x.disconnect()}},[]);let[pe,de]=e.useState(!1),[$,ae]=e.useState(!1),[M,z]=e.useState(null),[B,Z]=e.useState(null);e.useEffect(()=>{Xe(()=>{var n,a,m,v;(n=p.current)==null||n.dispatchEvent(new Event("input"));let x=(a=p.current)==null?void 0:a.selectionStart,i=(m=p.current)==null?void 0:m.selectionEnd,f=(v=p.current)==null?void 0:v.selectionDirection;x!==null&&i!==null&&(z(x),Z(i),K.current.prev=[x,i,f])})},[c,$]),e.useEffect(()=>{k!==void 0&&c!==k&&k.length<d&&c.length===d&&(q==null||q(c))},[d,q,k,c]);let F=rt({containerRef:ne,inputRef:p,pushPasswordManagerStrategy:N,isFocused:$}),me=e.useCallback(n=>{let a=n.currentTarget.value.slice(0,d);if(a.length>0&&S&&!S.test(a)){n.preventDefault();return}typeof k=="string"&&a.length<k.length&&document.dispatchEvent(new Event("selectionchange")),H(a)},[d,H,k,S]),fe=e.useCallback(()=>{var n;if(p.current){let a=Math.min(p.current.value.length,d-1),m=p.current.value.length;(n=p.current)==null||n.setSelectionRange(a,m),z(a),Z(m)}ae(!0)},[d]),ge=e.useCallback(n=>{var a,m;let v=p.current;if(!h&&(!re.current.isIOS||!n.clipboardData||!v))return;let x=n.clipboardData.getData("text/plain"),i=h?h(x):x;n.preventDefault();let f=(a=p.current)==null?void 0:a.selectionStart,X=(m=p.current)==null?void 0:m.selectionEnd,y=(f!==X?c.slice(0,f)+i+c.slice(X):c.slice(0,f)+i+c.slice(f)).slice(0,d);if(y.length>0&&S&&!S.test(y))return;v.value=y,H(y);let R=Math.min(y.length,d-1),E=y.length;v.setSelectionRange(R,E),z(R),Z(E)},[d,H,S,c]),Be=e.useMemo(()=>({position:"relative",cursor:u.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[u.disabled]),he=e.useMemo(()=>({position:"absolute",inset:0,width:F.willPushPWMBadge?`calc(100% + ${F.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:F.willPushPWMBadge?`inset(0 ${F.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:I,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[F.PWM_BADGE_SPACE_WIDTH,F.willPushPWMBadge,I]),Fe=e.useMemo(()=>e.createElement("input",Je(Ue({autoComplete:u.autoComplete||"one-time-code"},u),{"data-input-otp":!0,"data-input-otp-placeholder-shown":c.length===0||void 0,"data-input-otp-mss":M,"data-input-otp-mse":B,inputMode:V,pattern:S==null?void 0:S.source,"aria-placeholder":A,style:he,maxLength:d,value:c,ref:p,onPaste:n=>{var a;ge(n),(a=u.onPaste)==null||a.call(u,n)},onChange:me,onMouseOver:n=>{var a;de(!0),(a=u.onMouseOver)==null||a.call(u,n)},onMouseLeave:n=>{var a;de(!1),(a=u.onMouseLeave)==null||a.call(u,n)},onFocus:n=>{var a;fe(),(a=u.onFocus)==null||a.call(u,n)},onBlur:n=>{var a;ae(!1),(a=u.onBlur)==null||a.call(u,n)}})),[me,fe,ge,V,he,d,B,M,u,S==null?void 0:S.source,c]),le=e.useMemo(()=>({slots:Array.from({length:d}).map((n,a)=>{var m;let v=$&&M!==null&&B!==null&&(M===B&&a===M||a>=M&&a<B),x=c[a]!==void 0?c[a]:null,i=c[0]!==void 0?null:(m=A==null?void 0:A[a])!=null?m:null;return{char:x,placeholderChar:i,isActive:v,hasFakeCaret:v&&x===null}}),isFocused:$,isHovering:!u.disabled&&pe}),[$,pe,d,B,M,u.disabled,c]),Ge=e.useMemo(()=>T?T(le):e.createElement(_e.Provider,{value:le},W),[W,le,T]);return e.createElement(e.Fragment,null,b!==null&&e.createElement("noscript",null,e.createElement("style",null,b)),e.createElement("div",{ref:ne,"data-input-otp-container":!0,style:Be,className:C},Ge,e.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Fe)))});De.displayName="Input";function Q(t,r){try{t.insertRule(r)}catch{console.error("input-otp could not insert CSS rule:",r)}}var at=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`,lt="^[a-zA-Z0-9]+$";const G=e.forwardRef(({className:t,containerClassName:r,...l},s)=>o.jsx(De,{ref:s,containerClassName:Y("flex items-center gap-2 has-[:disabled]:opacity-50",r),className:Y("disabled:cursor-not-allowed",t),...l}));G.displayName="InputOTP";const te=e.forwardRef(({className:t,...r},l)=>o.jsx("div",{ref:l,className:Y("flex items-center",t),...r}));te.displayName="InputOTPGroup";const g=e.forwardRef(({index:t,className:r,...l},s)=>{const w=e.useContext(_e),{char:d,hasFakeCaret:I,isActive:P}=w.slots[t];return o.jsxs("div",{ref:s,className:Y("relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",P&&"z-10 ring-1 ring-ring",r),...l,children:[d,I&&o.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});g.displayName="InputOTPSlot";const Ae=e.forwardRef(({...t},r)=>o.jsx("div",{ref:r,role:"separator",...t,children:o.jsx($e,{name:"Delete"})}));Ae.displayName="InputOTPSeparator";try{G.displayName="InputOTP",G.__docgenInfo={description:"",displayName:"InputOTP",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((newValue: string) => unknown)"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},maxLength:{defaultValue:null,description:"",name:"maxLength",required:!0,type:{name:"number"}},render:{defaultValue:null,description:"",name:"render",required:!1,type:{name:"InputOTPRenderFn"}},textAlign:{defaultValue:null,description:"",name:"textAlign",required:!1,type:{name:"enum",value:[{value:'"right"'},{value:'"left"'},{value:'"center"'}]}},onComplete:{defaultValue:null,description:"",name:"onComplete",required:!1,type:{name:"((...args: any[]) => unknown)"}},pushPasswordManagerStrategy:{defaultValue:null,description:"",name:"pushPasswordManagerStrategy",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"increase-width"'}]}},pasteTransformer:{defaultValue:null,description:"",name:"pasteTransformer",required:!1,type:{name:"((pasted: string) => string)"}},containerClassName:{defaultValue:null,description:"",name:"containerClassName",required:!1,type:{name:"string"}},noScriptCSSFallback:{defaultValue:null,description:"",name:"noScriptCSSFallback",required:!1,type:{name:"string | null"}}}}}catch{}const mt={title:"ui/InputOTP",component:G,tags:["autodocs"],argTypes:{},args:{maxLength:6,pattern:lt,children:null},render:t=>o.jsx(G,{...t,render:void 0,children:o.jsxs(te,{children:[o.jsx(g,{index:0}),o.jsx(g,{index:1}),o.jsx(g,{index:2}),o.jsx(g,{index:3}),o.jsx(g,{index:4}),o.jsx(g,{index:5})]})}),parameters:{layout:"centered",docs:{description:{component:"Accessible one-time password component with copy paste functionality."}}}},U={},J={render:t=>o.jsxs(G,{...t,render:void 0,children:[o.jsxs(te,{children:[o.jsx(g,{index:0}),o.jsx(g,{index:1}),o.jsx(g,{index:2})]}),o.jsx(Ae,{}),o.jsxs(te,{children:[o.jsx(g,{index:3}),o.jsx(g,{index:4}),o.jsx(g,{index:5})]})]})};var ye,Se,we,Pe,Te;U.parameters={...U.parameters,docs:{...(ye=U.parameters)==null?void 0:ye.docs,source:{originalSource:"{}",...(we=(Se=U.parameters)==null?void 0:Se.docs)==null?void 0:we.source},description:{story:"The default form of the InputOTP field.",...(Te=(Pe=U.parameters)==null?void 0:Pe.docs)==null?void 0:Te.description}}};var Ee,Ce,je,Oe,Ie;J.parameters={...J.parameters,docs:{...(Ee=J.parameters)==null?void 0:Ee.docs,source:{originalSource:`{
  render: args => <InputOTP {...args} render={undefined}>
      <InputOTPGroup>
        <InputOTPSlot index={0} />
        <InputOTPSlot index={1} />
        <InputOTPSlot index={2} />
      </InputOTPGroup>
      <InputOTPSeparator />
      <InputOTPGroup>
        <InputOTPSlot index={3} />
        <InputOTPSlot index={4} />
        <InputOTPSlot index={5} />
      </InputOTPGroup>
    </InputOTP>
}`,...(je=(Ce=J.parameters)==null?void 0:Ce.docs)==null?void 0:je.source},description:{story:"Use multiple groups to separate the input slots.",...(Ie=(Oe=J.parameters)==null?void 0:Oe.docs)==null?void 0:Ie.description}}};const ft=["Default","SeparatedGroup"];export{U as Default,J as SeparatedGroup,ft as __namedExportsOrder,mt as default};
